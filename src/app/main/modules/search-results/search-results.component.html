<div class="container">
  <div class="row">
    <div id="left-content" class="col-3">
      <div class="row">
        <app-search-widget
          [destination]="destination"
          [startDate]="startDate"
          [endDate]="endDate"
          [visitors]="visitors"
          [latitude]="lat"
          [longitude]="lng"
          [radius]="radius"
        ></app-search-widget>
      </div>
      <div class="row" style="margin-top: 30px;">
        <app-filters [filters]="filters" [amenitiesCount]="amenitiesCount"></app-filters>
      </div>
    </div>
    <div id="right-content" class="col-9">
      <agm-map
        [latitude]="lat"
        [longitude]="lng"
        [zoom]="12"
        [maxZoom]="15"
        [styles]="mapStyle"
        [disableDefaultUI]="true"
        [zoomControl]="false"
        [scaleControl]="false"
        [mapTypeControl]="false"
        [fitBounds]="hotelPagedResults.content.length>0"
      >
        <agm-marker-cluster
          imagePath="https://raw.githubusercontent.com/googlemaps/v3-utility-library/master/markerclustererplus/images/m">
          <agm-marker *ngFor="let hotel of hotelPagedResults.content"
                      [latitude]="hotel.lat"
                      [longitude]="hotel.lng"
                      [agmFitBounds]="true"
                      [iconUrl]="markerIcon"
          >
            <agm-info-window [isOpen]="true">
              <strong>{{hotel.id}}</strong>
              <p>{{hotel.name}}</p>
              <p>{{hotel.description_short}}</p>
              <nz-rate [ngModel]="hotel.stars" nzDisabled></nz-rate>
            </agm-info-window>
          </agm-marker>
        </agm-marker-cluster>
        <agm-circle [latitude]="lat" [longitude]="lng"
                    [radius]="radius*1000"
                    [fillColor]="'rgba(57,199,100,0.4)'"
                    [circleDraggable]="false"
                    [editable]="true"
                    (radiusChange)="onCircleRadiusChange($event)"
                    (centerChange)="onCenterChange($event)"></agm-circle>
      </agm-map>
      <hr>
      <h3><b>{{destination}}: {{hotelPagedResults.content.length}} hotels found</b></h3>
      <hr>
      <section class="search-box">
        <div class="row">
          <div class="col-md-12 listing-block">
            <app-hotel-item *ngFor="let hotel of hotelPagedResults.content" [hotel]="hotel"></app-hotel-item>
          </div>
        </div>
      </section>
      <nz-pagination
        *ngIf="hotelPagedResults.totalElements"
        [nzPageSize]="hotelPagedResults.size"
        [nzPageIndex]="hotelPagedResults.page + 1"
        [nzTotal]="hotelPagedResults.totalElements"
        (nzPageIndexChange)="onPageIndexChange($event)"
      ></nz-pagination>
      <nz-empty *ngIf="!hotelPagedResults.totalElements"></nz-empty>
    </div>
  </div>
</div>
